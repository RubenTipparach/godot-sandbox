[gd_scene format=3 uid="uid://dh8evteqpnujh"]

[ext_resource type="Script" uid="uid://di2a064rditfx" path="res://scripts/bullet.gd" id="1"]
[ext_resource type="Texture2D" uid="uid://l5frs8cjg8r7" path="res://resources/sprites/spark.png" id="2"]

[sub_resource type="StandardMaterial3D" id="bullet_mat"]
transparency = 1
albedo_texture = ExtResource("2")
emission_enabled = true
emission = Color(1, 0.9, 0.2, 1)
emission_energy_multiplier = 2.0
texture_filter = 0
billboard_mode = 1

[sub_resource type="QuadMesh" id="bullet_quad"]
material = SubResource("bullet_mat")
size = Vector2(6, 6)

[sub_resource type="ParticleProcessMaterial" id="trail_mat"]
direction = Vector3(0, 0, 0)
spread = 10.0
initial_velocity_min = 1.0
initial_velocity_max = 3.0
gravity = Vector3(0, 0, 0)
damping_min = 5.0
damping_max = 10.0
scale_min = 0.5
scale_max = 1.5
color = Color(1, 0.9, 0.2, 0.5)

[sub_resource type="StandardMaterial3D" id="trail_billboard_mat"]
transparency = 1
albedo_texture = ExtResource("2")
texture_filter = 0
billboard_mode = 1

[sub_resource type="QuadMesh" id="trail_quad"]
material = SubResource("trail_billboard_mat")
size = Vector2(3, 3)

[node name="Bullet" type="Node3D"]
script = ExtResource("1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
cast_shadow = 0
mesh = SubResource("bullet_quad")

[node name="Trail" type="GPUParticles3D" parent="."]
cast_shadow = 0
emitting = false
amount = 8
lifetime = 0.2
local_coords = false
process_material = SubResource("trail_mat")
draw_pass_1 = SubResource("trail_quad")
